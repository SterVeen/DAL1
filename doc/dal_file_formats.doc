/* $Id$*/

/**

\page dal_file_formats DAL :: Supported data formats

<hr>

- \ref dal_formats_beamformed
- \ref dal_formats_tbb

<hr>

\section dal_formats_beamformed Beamformed data

A LOFAR Beam-Formed file is stored per observation as an HDF5 file, grouped by
beam and then subband.  All attribute data, described below, is defined in the
<i>LOFAR Beam-Formed Data Format ICD</i>.

\verbatim
beam-formed-file.h5         <-------  Root level of dataset
|--beam000                  <-------  First beam group
|  |--SB000                 \
|  |--SB001                  )------  Table for each subband
|  `--SB00N                 /
|--beam001                  <-------  Second beam group
|  |--SB000                 \
|  |--SB001                  )------  Table for each subband
|  `--SB00N                 /
`--beam00N                  <-------  Nth beam group
   |--SB000                 \
   |--SB001                  )------  Table for each subband
   `--SB00N                 /
\endverbatim

<ul>
  <li><b>Root-level</b> The root level of the file contains the majority of
  associated meta-data, describing the circumstances of the observation. These
  data attributes include time, frequency, weather and other important
  characteristics of the dataset.

  <li><b>Beam Group</b> Each observation beam is stored as a seperate group
  within the file, each containing its own subband tables and pointing
  information.

  <li><b>Subband Data tables</b> The subband tables are where the bulk of the
  data reside. Each beam has a fixed number of tables; one per subband. The subband
  frequency information is stored as an attribute of the table.

  <li><b>Full Resolution</b> The default data stored in each subband table is full
  resolution, polarized voltages from the dipoles. These voltages are stored as
  16-bit complex pairs for both X and Y.  In other words, each sample is stored
  as (X-real, X-imaginary)(Y-real, Y-imaginary) for a total of 64-bits.

  <li><b>Total Intensity</b> Although complete, full resolution data is very
  large due to a very high sampling rate. In some cases, the observer may not
  be especially
  interested in polarization data and instead choose to receive only the total
  intensities of the samples.  Because the total intensity information can be
  stored as a single 32-bit floating point value, the size of the file is
  effectively halved.  In this case, each subband table consists of one total
  intensity value per sample instead of two complex pairs as described above.

  <li><b>Downsampled</b> Furthermore, the observer may prefer a smaller file
  with data averaged along the time axis, or ``downsampled''. A relatively
  modest downsample factor (i.e. 128) will drastically reduce the size of the
  data file and, in many cases, still provide interesting, high-resolution
  data for analysis.

  <li><b>Channelized</b> Another option for the user is to bin the data into
  frequency channels, effectively downsampling the data along the time-axis
  by a factor of the number of frequency bins. <br>
  In this case, the subband table would have total intensities for each channel,
  per sample.
</ul>

<hr>

\section dal_formats_tbb TBB time-series data

Structure of the dataset:
\verbatim
/                             ... Group
|-- TELESCOPE                 ... Attribute       ... string
|-- OBSERVER                  ... Attribute       ... string
|-- PROJECT                   ... Attribute       ... string
|-- Station001                ... Group
|   |-- OBSERVATION_ID        ... Attribute       ... string
|   |-- OBSERVATION_MODE      ... Attribute       ... string
|   |-- TRIGGER_TYPE          ... Attribute       ... string
|   |-- TRIGGER_OFFSET        ... Attribute       ... string
|   |-- TRIG_ANTS             ... Attribute       ... array<int,1>
|   |-- BEAM_DIRECTION        ... Attribute       ... array<double,2>
|   |-- 001000000             ... Dataset         ... array<uint,1>
|   |   |-- STATION_ID        ... Attribute       ... uint
|   |   |-- RSP_ID            ... Attribute       ... uint 
|   |   |-- RCU_ID            ... Attribute       ... uint
|   |   |-- SAMPLE_FREQ       ... Attribute       ... double
|   |   |-- TIME              ... Attribute       ... uint
|   |   |-- SAMPLE_NR         ... Attribute       ... uint
|   |   |-- SAMPLES_PER_FRAME ... Attribute       ... uint
|   |   |-- DATA_LENGTH       ... Attribute       ... uint
|   |   |-- NYQUIST_ZONE      ... Attribute       ... uint
|   |   |-- FEED              ... Attribute       ... string
|   |   |-- ANT_POSITION      ... Attribute       ... array<double,1>
|   |   `-- ANT_ORIENTATION   ... Attribute       ... array<double,1>
|   |-- 001000001
|   |-- 001000002
|   |-- 001000003
|   |-- 001000004
|   |
|   |-- 001001000
|   |-- 001001001
|   |
|
\endverbatim

As can be read from the above listing, the internal structure of a LOFAR
time-series dataset is made up of a number of sub-components, each of them
representing a hierarchical level in the setup of the telecope.

*/
